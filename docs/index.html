<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>è»Šæµè¾¨è­˜ç³»çµ±</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body{font-family:sans-serif;margin:2rem;text-align:center}
    #level{font-size:2.5rem;margin:1rem 0}
  </style>
</head>
<body>
<h1>ğŸš¦ ç›®å‰è»Šæµï¼š<span id="level">{{LATEST}}</span></h1>
<canvas id="chart" width="600" height="300"></canvas>

<script>
fetch('../data/vehicles.json?'+Date.now())
  .then(r=>r.json())
  .then(data=>{
    const labels = data.map(d=>d.t.slice(11));      // åªè¦ hh:mm:ss
    const counts = data.map(d=>d.c);
    new Chart(document.getElementById("chart"), {
      type:'line',
      data:{labels, datasets:[{label:'Vehicles', data:counts, tension:.3}]},
      options:{scales:{y:{beginAtZero:true}}}
    });
    // å‹•æ…‹å¡«å…¥æœ€æ–°å£…å¡ç­‰ç´š (level ç”± detect.py å¯«å…¥ HTML)
    document.getElementById("level").textContent = "{{LATEST}}";
  });
</script>
</body>
</html>
